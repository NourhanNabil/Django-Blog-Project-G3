{% extends 'blog/base.html'%}
{% block title_block %}
<title>{{post.Title}}</title>
{% endblock %}
{% block main_block %}
<br> <br><br><br>
<h1>{{post.Title}}</h1>
    <img src="{{post.Image.url}}" alt="">
<!-- likes button -->
<br />
<br />
<br />
{% if request.user.is_authenticated and  user.id != post.author.id%}

<form action="{% url 'like_post' post.pk %}" method="POST">
  {% csrf_token %} {% if liked %}
  <button
  type="submit"
  name="post_id"
  value="{{post.id}}"
    class="btn btn-danger"
    >
    unlike  
</button>

{% else %}

<button
    type="submit"
    name="post_id"
    value="{{post.id}}"
    class="btn btn-primary"
    >
    like
</button>
{% endif %} {{total_likes}}
</form>

{% else %}
<small>...</small>
{% endif %}
<br />
<br />
<!-- end of likes button -->
<small>Posted By :{{post.author}}</small>
<p>{{post.Content|safe}}</p>
<p>Category:{{post.category}}</p> 
<p>Tags:{{post.tags}}</p>
<p>Date:{{post.date}}</p>
{% if user.is_authenticated %}
  {% if user.id == post.author.id or user.is_staff %}
<li><a href="{% url 'update-post' post.id%}">Edit</a></li>
<li><a href="{% url 'delete-post' post.id%}">Delete</a></li>
  {% endif %}
{% endif %}
<button class="btn btn-secondary "><a href="{% url 'home' %}" class="text-decoration-none text-light">Back to Home </a></button>
<hr>
<h2>Comments</h2>
<br>
{% if not post.comments.all %} 
<p>No Comments Yet <a href="{% url 'add-comment' post.id %}">Add Comment</a> </p> 
{% else %}
<br><br>
{% for comment in post.comments.all %}
<strong>{{comment.author}} -{{comment.created_at}}</strong>  
<br>
{{comment.content}}
<hr>
{% endfor %}
<a href="{% url 'add-comment' post.id %}">Add Comment</a>
{% endif %}
{% endblock %}

